\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{style}[2017/04/15 Das Kapital style]

%% footnotes
\setlength{\skip\footinsZ}{0pt}
\setlength{\footmarkwidth}{-0.5em}
\setlength{\footmarksep}{-\footmarkwidth}

\renewcommand*{\footnoterule}{%
  \kern-3pt%
  {\color{gray75}\hrule width 0.3\columnwidth}
  \kern 5.2pt}

%% paragraph
\setlength{\parskip}{0em}

%% grid
\newlength{\defindent}
\setlength{\defindent}{\parindent}

\newcommand{\defhspace}{\hspace{\defindent}}

%% format plain pagestyle
\makeevenfoot{plain}{\null\defhspace{}\sffamily\thepage}{}{}
\makeoddfoot{plain}{}{}{\sffamily\thepage\defhspace{}}

\copypagestyle{mypage}{plain}

\makepsmarks{mypage}{%
  \nouppercaseheads
  \clearmark{part}
  \clearmark{chapter}
  \clearmark{section}
  \createmark{part}{left}{shownumber}{\partname\ }{. }
  \createmark{chapter}{right}{shownumber}{\@chapapp\ }{. }
  \createplainmark{toc}{both}{\contentsname}
  \createplainmark{lof}{both}{\listfigurename}
  \createplainmark{lot}{both}{\listtablename}
  \createplainmark{bib}{both}{\bibname}
  \createplainmark{index}{both}{\indexname}
  \createplainmark{glossary}{both}{\glossaryname}
}

\makeevenhead{mypage}{\null\defhspace{}\footnotesize\sffamily\scshape\leftmark}{}{}
\makeoddhead{mypage}{}{}{\footnotesize\sffamily\scshape\rightmark\null\defhspace{}}

\pagestyle{mypage}

\aliaspagestyle{part}{empty}

\newcommand{\htitlespace}{\hspace{1.5cm}}
%% Viddil

\renewcommand{\partnamefont}{\raggedright\Large\sffamily\scshape}
\renewcommand{\partnumfont}{\Large\sffamily\scshape}

\renewcommand{\parttitlefont}{\Huge\letterspacefont\raggedright\MakeUppercase}
\renewcommand*{\printparttitle}[1]{
  \hfill\begin{minipage}{\dimexpr\textwidth-1.5cm}
  \parttitlefont{#1}
  \end{minipage}
}

\renewcommand*{\beforepartskip}{\null\vspace{3cm}\noindent\hspace{1.5cm}}
\renewcommand*{\midpartskip}{\vskip 10pt}
\renewcommand*{\afterpartskip}{\vfill\newpage}

%% Rozdil

\makechapterstyle{default}{%
  \renewcommand*{\chapnumfont}{\large\sffamily}
  \renewcommand*{\chapnamefont}{\large\sffamily}
  \renewcommand*{\chaptitlefont}{\huge\bfseries\sffamily}
  \setlength{\beforechapskip}{0pt}
  \setlength{\midchapskip}{10pt}
  \setlength{\afterchapskip}{50\p@ \@plus 10\p@ \@minus 10\p@}
}
\chapterstyle{default}


\setsecheadstyle{\Large\bfseries\sffamily\raggedright}

\setsubsecheadstyle{\large\bfseries\sffamily\raggedright}

\setsubsubsecheadstyle{\bfseries\raggedright}

\setparaheadstyle{\itshape\raggedright}
\setbeforeparaskip{-3.5ex plus -1ex minus -.2ex}
\setafterparaskip{1.5ex plus 1ex minus .2ex}

\setsecnumformat{\makebox[\defindent][r]{\csname the#1\endcsname~}}

%% Letterine
%% \usepackage{lettrine}

%% Book title page
\newcommand{\bookpaget}[2]{
  \cleardoublepage
  \thispagestyle{empty}
  \cftaddnumtitleline{toc}{book}{#1}{#2}{}
  \null\vspace{3cm}
  \noindent\htitlespace{\LARGE\scshape #1}
  
  \vspace{10pt}
  \hfill\begin{minipage}{\dimexpr\textwidth-1.5cm}
  \Huge\letterspacefont\raggedright\bfseries\MakeUppercase{#2}
  \end{minipage}
  \cleardoublepage
}

%% Sections without num
\newcommand{\nonumsection}[3]{
  \section*{#1}
  \markboth{#1}{#3}
  \cftaddnumtitleline{toc}{chapter}{}{#1#2#3}{\thepage}
}

%% TOC
\renewcommand{\cftpartname}{Відділ~}
\renewcommand{\cftchaptername}{Розділ~}
\renewcommand{\cftpartaftersnumb}{\\}

%% Polish
\newcommand{\bouillondot}{%
\begin{tikzpicture}[x=0.7pt, y=0.7pt, baseline=-1pt, use Hobby shortcut]\fill ([closed=true]0,0) .. (1,3) .. ([tension=1.4]0,4) .. (-1,3);\end{tikzpicture}}

\endinput